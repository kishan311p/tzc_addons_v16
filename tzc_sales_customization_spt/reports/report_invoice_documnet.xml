<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="kits_invoice_external_layout_standard">
        <t t-set="company" t-value="o.company_id"/>

        <div t-attf-class="article o_report_layout_standard o_company_#{company.id}_layout {{  'o_report_layout_background' if company.layout_background in ['Geometric', 'Custom']  else  '' }}" t-attf-style="background-image: url({{ 'data:image/png;base64,%s' % company.layout_background_image.decode('utf-8') if company.layout_background_image and company.layout_background == 'Custom' else '/base/static/img/bg_background_template.jpg' if company.layout_background == 'Geometric' else ''}});" t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id" t-att-data-oe-lang="o and o.env.context.get('lang')">
            <div class="">
                <!-- This div ensures that the address is not cropped by the header. -->
                <!-- <t t-call="web.address_layout"/> -->
            </div>
            <t t-out="0"/>
        </div>

        <div t-attf-class="footer o_standard_footer o_company_#{company.id}_layout" style="position:absolute;bottom:-115px;width:100%">
            <div class="text-center">
                <hr style="margin:0 !important" />
                <div name="financial_infos">
                    <!-- <span t-field="company.report_footer"/> -->
                </div>

                <ul class="list-inline">
                    <li class="list-inline-item" style="font-size: 12px">
                        <span>Please make all payments to Tanzacan Tradelink Inc.<br/>
                            Thank you for your business. How can we do better? support@teameto.com</span>
                        </li>
                </ul>
                <div t-if="report_type == 'pdf'" style="margin-top:-15px;font-size:16px">
                    Page: <span class="page"/>
 /                <span class="topage"/>
                    &#160;
                <span t-field="o.name"/>
            </div>
        </div>
        </div>
    </template>
    <template id="report_kits_invoice_document">
        <t t-call="tzc_sales_customization_spt.kits_invoice_external_layout_standard">
            <t t-if="o">
                <t t-set="company" t-value="o.company_id"/>
                <t t-set="model" t-value="o._name"/>
            </t>
            <t t-elif="doc">
                <t t-set="company" t-value="doc.company_id.sudo()"/>
                <t t-set="model" t-value="doc._name"/>
            </t>
            <div class="row" style="font-size:15px">
                <div class="col-6 mb4">
                    <img t-if="company.logo" t-att-src="image_data_uri(company.logo)" style="margin:40px 5px 5px 10px;height:35px;max-width:375px;" alt="Logo"/>
                </div>
                <div class="col-6 float-right company_address" style="padding-left:20%;">
                    <div>
                        <strong t-field="company.partner_id.name"/>
                    </div>
                    (A division of Tanzacan Tradelink Inc.)
                    <span t-field="company.street"/>
                    <br/>
                    <span t-field="company.city"/>
                    <span t-field="company.state_id.name"/>
                    <span t-field="company.country_id.name"/>
                    <span t-field="company.zip"/>
                    <br/>
                    Tel. <span t-field="company.phone"/>
                    <br/>
                        Email. <span t-field="company.email"/>
                </div>
            </div>
            <hr style="margin-top:0 !important"/>
            <!-- <div class="page"> -->
                <div class="row" style="margin-top:0px;">
                    <div class="col-6">
                        <strong t-if="o.partner_id">Billing Address:</strong>
                        <div>
                            <span t-field="o.partner_id.name"/>
                        </div>
                        <div>
                            <span t-field="o.partner_id.street"/>
                        </div>
                        <div>
                            <span t-field="o.partner_id.street2"/>
                        </div>
                        <div>
                            <span t-field="o.partner_id.city"/>
                            <span t-if="o.partner_id.city and o.partner_id.zip">,</span>
                            <span t-field="o.partner_id.zip"/>
                        </div>
                        <div>
                            <span t-field="o.partner_id.state_id.name"/>
                            <span t-if="o.partner_id.state_id.name and o.partner_id.country_id.name">,</span>
                            <span t-field="o.partner_id.country_id.name"/>
                        </div>
                        <div>Tel:
                    
                            <span t-field="o.partner_id.phone" />
                        </div>
                        <div>Email:
                    
                            <span t-field="o.partner_id.email" />
                        </div>
                    </div>
                    <div class="col-6">
                        <t t-if="o.partner_shipping_id">
                            
                            <strong >Shipping Address:</strong>
                            <div>
                            <span t-field="o.partner_shipping_id.name"/>
                        </div>
                        <div>
                            <span t-field="o.partner_shipping_id.street"/>
                        </div>
                        <div>
                            <span t-field="o.partner_shipping_id.street2"/>
                        </div>
                        <div>
                            <span t-field="o.partner_shipping_id.city"/>
                            <span t-if="o.partner_shipping_id.city and o.partner_shipping_id.zip">,</span>
                            <span t-field="o.partner_shipping_id.zip"/>
                        </div>
                        <div>
                            <span t-field="o.partner_shipping_id.state_id.name"/>
                            <span t-if="o.partner_shipping_id.state_id.name and o.partner_shipping_id.country_id.name">,</span>
                            <span t-field="o.partner_shipping_id.country_id.name"/>
                        </div>
                        <div>Tel:
                            
                            <span t-field="o.partner_shipping_id.phone" />
                        </div>
                        <div>Email:
                            
                            <span t-field="o.partner_shipping_id.email" />
                        </div>
                    </t>
                    </div>
                </div>
                <h4 style="line-height: 0.6;">
                    <br/>
                    <span t-if="o.move_type == 'out_invoice' and o.state == 'posted'">Invoice</span>
                    <span t-if="o.move_type == 'out_invoice' and o.state == 'draft'">Draft Invoice</span>
                    <span t-if="o.move_type == 'out_invoice' and o.state == 'cancel'">Cancelled Invoice</span>
                    <span t-if="o.move_type == 'out_refund'">Credit Note</span>
                    <span t-if="o.move_type == 'in_refund'">Vendor Credit Note</span>
                    <span t-if="o.move_type == 'in_invoice'">Vendor Bill</span>
                    <span t-if="o.name != '/'" t-field="o.name"/>
                </h4>
                <div class="row mt32 mb32" id="informations">
                    <t t-if="o.state == 'posted'">
                        <div class="col-auto mw-100 mb-2" t-if="o.invoice_date" name="invoice_date">
                            <strong>Invoice Date:</strong>
                            <p class="m-0" t-field="o.invoice_date"/>
                        </div>
                    </t>
                    <div class="col-auto mw-100 mb-2" t-if="o.invoice_origin" name="origin">
                        <strong>Sales Order:</strong>
                        <p class="m-0" t-field="o.invoice_origin"/>
                    </div>
                    <t t-set="kits_picking_details" t-value="o.get_invoice_courier()"/>
                    <div class="col-auto mw-100 mb-2" style="width:15% !important">
                        <strong>Payment Terms:</strong>
                        <p class="m-0 text-start" t-esc="kits_picking_details[2]"/>
                    </div>
                    <div class="col-auto mw-100 mb-2 text-center" style="width:15% !important">
                        <strong>Shipping Provider:</strong>
                        <p class="m-0 text-center" t-esc="kits_picking_details[0]"/>
                    </div>
                    <div class="col-auto mw-100 mb-2 text-center" t-attf-style="{{'width:17% !important' if kits_picking_details[1] != '' else ''}}">
                        <strong>Tracking:</strong>
                        <p class="m-0" t-esc="kits_picking_details[1]"/>
                    </div>
                    <div class="col-auto mw-100 mb-2 text-center">
                        <strong>Total Qty:</strong>
                        <p class="m-0" t-esc="int(sum(request.env['account.move.line'].sudo().search([('move_id','=',o.id),('product_id.type','!=','service'),('product_id.is_case_product','=',False)]).mapped('quantity')))"/>
                    </div>
                    <div class="col-auto mw-100 mb-2 text-center">
                        <strong>Total Cases:</strong>
                        <p class="m-0" t-esc="int(request.env['sale.order'].sudo().search([('name','=',o.invoice_origin)]).no_of_cases)"/>
                    </div>
                    <div class="col-auto mw-100 mb-2 text-center">
                        <strong>Currency:</strong>
                        <p class="m-0" t-esc="o.currency_id.name"/>
                    </div>
                </div>

                <table class="table table-sm table-borderless o_main_table mt-3">
                    <thead style="border-top:1px solid lightgrey;border-bottom:1px solid lightgrey">
                        <tr class="text-center">
                            <th style="width: 6%;"></th>
                            <th class="text-start">Product</th>
                            <th>Cat</th>
                            <th>Material</th>
                            <th>HS Code</th>
                            <th>Qty</th>
                            <th class="text-end">Price</th>
                            <th class="text-end">Subtotal</th>
                        </tr>
                    </thead>
                    <t t-set="sub_total" t-value="0.00"/>
                    <t t-set="discount" t-value="abs(o.global_discount)"/>
                    <tbody class="sale_tbody">
                        <t t-foreach="o.invoice_line_ids" t-as="line">
                            <t t-if="not line.product_id.is_admin and not line.product_id.is_shipping_product and not line.product_id.is_global_discount and not line.product_id.is_case_product">
                                <t t-set="discount" t-value="discount + line.unit_discount_price"/>
                                <tr class="text-center" style="border-bottom:1px solid lightgrey;">
                                    <t t-if="line.sale_type">
                                        <td>
                                            <style>
                                                .te_ribbon-wrapper #style_3.label_div {
                                                    display: inline-block;
                                                    width: auto;
                                                    font-size: 0.8125rem;
                                                    background-color: #353e47;
                                                    position: absolute;
                                                    top: 10px;
                                                    right: unset;
                                                    bottom: unset;
                                                    left: 0px;
                                                    z-index: 1;
                                                    overflow: hidden;
                                                    @media (max-width:767px){
                                                        font-size: 0.0125rem;
                                                    }
                                                }
                                                .te_ribbon-wrapper #style_3.label_div .te_label_name.te_label_name_wish {
                                                    padding: 2px 4px !important;
                                                }
                                                .te_ribbon-wrapper #style_3.label_div .te_label_name.te_label_name_wish:before {
                                                    //content: "\f02b";
                                                    font-family: FontAwesome;
                                                    margin-right: 5px;
                                                    font-size: 8px;
                                                }
                                            </style>
                                            <div class="te_ribbon-wrapper" style="color:white">
                                                <div class="style_3 label_div" id="style_3" t-attf-style="background-color:#{'#e50000' if line.sale_type == 'on_sale' else '#990000' if line.sale_type == 'clearance' else ''};font-weight: bold;top: auto !important;left: 20px !important;font-size: 9px;">
                                                    <div class="p-1 te_label_name te_label_name_wish">
                                                        <span t-esc="dict(line._fields['sale_type'].selection).get(line.sale_type)"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td name="td_name" class="text-start">
                                            <span t-if="line.product_id.display_name" t-esc="line.product_id.display_name"/>
                                            <span t-else="">N/A</span>
                                        </td>
                                    </t>
                                    <t t-else="">
                                        <td name="td_name" class="text-start" colspan="2">
                                            <span t-if="line.product_id.display_name" t-esc="line.product_id.display_name"/>
                                            <span t-else="">N/A</span>
                                        </td>
                                    </t>
                                    <td name="td_name">
                                        <span t-if="line.product_id.categ_id" t-esc="line.product_id.categ_id.name"/>
                                        <span t-else="">N/A</span>
                                    </td>
                                    <td name="td_name">
                                        <span t-if="line.product_id.material_id" t-esc="', '.join(line.product_id.material_id.mapped('name'))"/>
                                        <span t-else="">N/A</span>
                                    </td>
                                    <td name="td_name">
                                        <span t-if="line.product_id.hs_code" t-esc="line.product_id.hs_code"/>
                                        <span t-else="">N/A</span>
                                    </td>
                                    <td name="td_name">
                                        <span t-if="line.quantity" t-esc="int(line.quantity)"/>
                                        <span t-else="">N/A</span>
                                    </td>
                                    <td name="td_name" class="text-end">
                                        <span t-field="line.discount_unit_price" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/>
                                    </td>
                                    <td name="td_name" class="text-end">
                                        <t t-set="sub_total" t-value="sub_total + line.price_subtotal"/>
                                        <span t-field="line.price_subtotal" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/>
                                    </td>
                                </tr>
                            </t>
                        </t>
                        <tr style="border-bottom:1px solid lightgrey">
                            <td style='font-weight:600' colspan='8' >Cases</td>
                        </tr>
                        <t t-foreach="o.invoice_line_ids" t-as="line">
                            <t t-if="not line.product_id.is_admin and not line.product_id.is_shipping_product and not line.product_id.is_global_discount and line.product_id.is_case_product">
                                <t t-set="discount" t-value="discount + line.unit_discount_price"/>
                                <tr class="text-center" style="border-bottom:1px solid lightgrey;">
                                    <t t-if="line.sale_type">
                                        <td>
                                            <style>
                                                .te_ribbon-wrapper #style_3.label_div {
                                                    display: inline-block;
                                                    width: auto;
                                                    font-size: 0.8125rem;
                                                    background-color: #353e47;
                                                    position: absolute;
                                                    top: 10px;
                                                    right: unset;
                                                    bottom: unset;
                                                    left: 0px;
                                                    z-index: 1;
                                                    overflow: hidden;
                                                    @media (max-width:767px){
                                                        font-size: 0.0125rem;
                                                    }
                                                }
                                                .te_ribbon-wrapper #style_3.label_div .te_label_name.te_label_name_wish {
                                                    padding: 2px 4px !important;
                                                }
                                                .te_ribbon-wrapper #style_3.label_div .te_label_name.te_label_name_wish:before {
                                                    //content: "\f02b";
                                                    font-family: FontAwesome;
                                                    margin-right: 5px;
                                                    font-size: 8px;
                                                }
                                            </style>
                                            <div class="te_ribbon-wrapper" style="color:white">
                                                <div class="style_3 label_div" id="style_3" t-attf-style="background-color:#{'#e50000' if line.sale_type == 'on_sale' else '#990000' if line.sale_type == 'clearance' else ''};font-weight: bold;top: auto !important;left: 20px !important;font-size: 9px;">
                                                    <div class="p-1 te_label_name te_label_name_wish">
                                                        <span t-esc="dict(line._fields['sale_type'].selection).get(line.sale_type)"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td name="td_name" class="text-start">
                                            <span t-esc="line.product_id.variant_name"/>
                                        </td>
                                    </t>
                                    <t t-else="">
                                        <td name="td_name" class="text-start" colspan="2">
                                            <!-- <span t-if="line.product_id.display_name" t-esc="line.product_id.display_name"/> -->
                                            <!-- <span t-else="">N/A</span> -->
                                            <span t-esc="line.product_id.variant_name"/>
                                        </td>
                                    </t>
                                    <td name="td_name">
                                        <span t-if="line.product_id.categ_id" t-esc="line.product_id.categ_id.name"/>
                                        <span t-else="">N/A</span>
                                    </td>
                                    <td colspan='2'></td>
                                    <!-- <td name="td_name">
                                        <span t-if="line.product_id.material_id" t-esc="', '.join(line.product_id.material_id.mapped('name'))"/>
                                        <span t-else="">N/A</span>
                                    </td>
                                    <td name="td_name">
                                        <span t-if="line.product_id.hs_code" t-esc="line.product_id.hs_code"/>
                                        <span t-else="">N/A</span>
                                    </td> -->
                                    <td name="td_name">
                                        <span t-if="line.quantity" t-esc="int(line.quantity)"/>
                                        <span t-else="">N/A</span>
                                    </td>
                                    <td name="td_name" class="text-end">
                                        <span t-field="line.discount_unit_price" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/>
                                    </td>
                                    <td name="td_name" class="text-end">
                                        <!-- <t t-set="sub_total" t-value="sub_total + line.price_subtotal"/> -->
                                        <span t-field="line.price_subtotal" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/>
                                    </td>
                                </tr>
                            </t>
                        </t>
                    </tbody>
                    <div class="clearfix" name="so_total_summary">
                        <div id="total" class="row" name="total" style="page-break-inside: auto">
                            <div t-attf-class="#{'col-4' if report_type != 'html' else 'col-sm-7 col-md-5'} ml-auto">
                                <t t-set="html_val" t-value="o.get_html_field_val(o.company_id.bank_details)"/>
                                <t t-if="html_val">
                                    <table class="table table-sm table-borderless">
                                        <!-- <p style="page-break-before:always;"/> -->
                                        <tr>
                                            <div>
                                                <td>
                                                    <!-- <div style="border-style: groove;border-width: 1px; max-width: 90%;">
                                                        <p name="comment">
                                                            <span style="margin-left:10px;">
                                                                <b>Bank Transfer Details:</b>
                                                            </span>
                                                            <br/>
                                                            <span t-field="o.company_id.bank_details"/>
                                                        </p>
                                                    </div> -->
                                                </td>
                                            </div>
                                            <td>
                                                <div class="col-4" style="float:right;padding:0px;">
                                                    <table class="table table-sm">
                                                        <tr class="border-black">
                                                            <td>
                                                                <strong>Subtotal</strong>
                                                            </td>
                                                            <td name="td_admin" class="text-end">
                                                                <span t-esc="round(sub_total,2)" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                                                            </td>
                                                        </tr>
                                                        <tr class="border-black">
                                                            <td name="td_shipping_product_total_amount_label">
                                                                <strong>Shipping</strong>
                                                            </td>
                                                            <td name="td_amount_untaxed" class="text-end">
                                                                <t t-if="o.order_id.shipping_cost != o.order_id.amount_is_shipping_total">
                                                                    <span style="white-space: nowrap;color:red;text-decoration:line-through;">
                                                                        <span style='color:black;' t-field="o.order_id.shipping_cost" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                                                                    </span>
                                                                    /
                                                                    <span>
                                                                        <span style="color:red;" t-field="o.order_id.amount_is_shipping_total" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                                                                    </span>
                                                                </t>
                                                                <t t-else="">
                                                                    <span t-field="o.amount_is_shipping_total" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                                                                </t>
                                                            </td>
                                                        </tr>
                                                        <tr class="border-black">
                                                            <td name="td_admin_product_total_amount_label">
                                                                <strong>Admin Fee</strong>
                                                            </td>
                                                            <td name="td_admin" class="text-end">
                                                                <span t-field="o.amount_is_admin" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                                                            </td>
                                                        </tr>
                                                        <tr class="border-black">
                                                            <td name="td_case_total_product_total_amount_label">
                                                                <strong>Case Total</strong>
                                                            </td>
                                                            <td name="td_case_total" class="text-end">
                                                                <span t-field="o.amount_is_case" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                                                            </td>
                                                        </tr>
                                                        <t t-if="o.global_discount">
                                                            <tr class="border-black">
                                                                <td name="td_amount_discount_label">
                                                                    <strong>Discount</strong>
                                                                </td>
                                                                <td name="td_amount_discount" class="text-end o_price_total">
                                                                    <span t-esc="o.global_discount" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/>
                                                                </td>
                                                            </tr>
                                                        </t>
                                                        <tr class="border-black">
                                                            <td name="td_amount_by_group_label">
                                                                <strong>Tax</strong>
                                                            </td>
                                                            <td name="td_amount_by_group" class="text-end o_price_total">
                                                                <span t-esc="o.currency_id.symbol"/>
                                                                <span t-esc="'{0:.2f}'.format(round(o.kits_amount_tax,2))"/>
                                                                <!-- <span t-esc="o.amount_tax" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/> -->
                                                            </td>
                                                        </tr>

                                                        <tr class="border-black">
                                                            <td name="td_amount_by_group_label">
                                                                <strong>Total</strong>
                                                            </td>
                                                            <td style="white-space: nowrap;" name="td_amount_by_group" class="text-end o_price_total">
                                                            (                                                                <span t-esc="o.currency_id.name"/>
                                                                )
                                                                <!-- <span t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}" t-esc="round((sub_total + o.amount_is_shipping_total + o.amount_is_admin  + o.amount_tax) - abs(o.global_discount),2)"/> -->
                                                                <span t-esc="'{0:.2f}'.format(round(o.kits_amount_total,2))"/>
                                                            </td>
                                                        </tr>
                                                        <tr class="border-black">
                                                            <td name="td_amount_by_group_label">
                                                                <strong>Total Quantity</strong>
                                                            </td>
                                                            <td style="white-space: nowrap;" name="td_amount_by_group" class="text-end o_price_total">
                                                                <span t-esc="int(sum(request.env['account.move.line'].sudo().search([('move_id','=',o.id),('product_id.type','!=','service'),('product_id.is_case_product','=',False)]).mapped('quantity')))"/>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </div>
                                            </td>
                                        </tr>

                                    </table>
                                </t>
                                <t t-else="">
                                    <table class="table table-sm table-borderless">
                                        <tr>
                                            <div>
                                                <td>
                                                    <!-- <div style="border-style: groove;border-width: 1px; max-width: 90%;">
                                                        <p name="comment">
                                                            <span style="margin-left:10px;">
                                                                <b>Bank Transfer Details:</b>
                                                            </span>
                                                            <br/>
                                                            <span t-field="o.company_id.bank_details"/>
                                                        </p>
                                                    </div> -->
                                                </td>
                                            </div>
                                            <td>
                                                <div class="col-4" style="float:right;padding:0px;">
                                                    <table class="table table-sm">
                                                        <tr class="border-black">
                                                            <td>
                                                                <strong>Subtotal</strong>
                                                            </td>
                                                            <td name="td_admin" class="text-right">
                                                                <span t-esc="round(sub_total,2)" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                                                            </td>
                                                        </tr>
                                                        <tr class="border-black">
                                                            <td name="td_shipping_product_total_amount_label">
                                                                <strong>Shipping</strong>
                                                            </td>
                                                            <td name="td_amount_untaxed" class="text-right">
                                                                <t t-if="o.order_id.shipping_cost != o.order_id.amount_is_shipping_total">
                                                                    <span style="white-space: nowrap;color:red;text-decoration:line-through;">
                                                                        <span style='color:black;' t-field="o.order_id.shipping_cost" t-options='{"widget": "monetary", "display_currency": o.pricelist_id.currency_id}'/>
                                                                    </span>
                                                                    /
                                                                    <span>
                                                                        <span style="color:red;" t-field="o.order_id.amount_is_shipping_total" t-options='{"widget": "monetary", "display_currency": o.pricelist_id.currency_id}'/>
                                                                    </span>
                                                                </t>
                                                                <t t-else="">
                                                                    <span t-field="o.amount_is_shipping_total" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                                                                </t>
                                                            </td>
                                                        </tr>
                                                        <tr class="border-black">
                                                            <td name="td_admin_product_total_amount_label">
                                                                <strong>Admin Fee</strong>
                                                            </td>
                                                            <td name="td_admin" class="text-right">
                                                                <span t-field="o.amount_is_admin" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                                                            </td>
                                                        </tr>
                                                        <t t-if="o.global_discount">
                                                            <tr class="border-black">
                                                                <td name="td_amount_discount_label">
                                                                    <strong>Discount</strong>
                                                                </td>
                                                                <td name="td_amount_discount" class="text-right o_price_total">
                                                                    <span t-esc="o.global_discount" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/>
                                                                </td>
                                                            </tr>
                                                        </t>

                                                        <tr class="border-black">
                                                            <td name="td_amount_by_group_label">
                                                                <strong>Tax</strong>
                                                            </td>
                                                            <td name="td_amount_by_group" class="text-right o_price_total">
                                                                <!-- <span t-esc="o.amount_tax" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/> -->
                                                                <span t-esc="o.currency_id.symbol"/>
                                                                <span t-esc="'{0:.2f}'.format(round(o.kits_amount_tax,2))"/>
                                                            </td>
                                                        </tr>

                                                        <tr class="border-black">
                                                            <td name="td_amount_by_group_label">
                                                                <strong>Total</strong>
                                                            </td>
                                                            <td style="white-space: nowrap;" name="td_amount_by_group" class="text-right o_price_total">
                                                            (                                                                <span t-esc="o.currency_id.name"/>
                                                                )
                                                                <!-- <span t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}" t-esc="round((sub_total + o.amount_is_shipping_total + o.amount_is_admin  + o.amount_tax) - abs(o.global_discount),2)"/> -->
                                                                <span t-esc="'{0:.2f}'.format(round(o.kits_amount_total,2))"/>
                                                            </td>
                                                        </tr>
                                                        <tr class="border-black">
                                                            <td name="td_amount_by_group_label">
                                                                <strong>Total Quantity</strong>
                                                            </td>
                                                            <td style="white-space: nowrap;" name="td_amount_by_group" class="text-right o_price_total">
                                                                <span t-esc="int(sum(request.env['account.move.line'].sudo().search([('move_id','=',o.id),('product_id.type','!=','service'),('product_id.is_case_product','=',False)]).mapped('quantity')))"/>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </div>
                                            </td>
                                        </tr>

                                    </table>
                                </t>
                            </div>
                        </div>
                    </div>
                </table>
                <p style="page-break-before:always;"/>
                <div class="col-12 d-flex p-0">
                    <div class="col-9 row mt-5 table table-borderless text-start" style="font-family: 'Lato', sans-serif;">
                        <table style="width: 50%;font-family: 'Lato', sans-serif;">
                            <t t-if="o.invoice_origin">
                                <tr>
                                    <th>Invoice Number:</th>
                                    <td>
                                        <span t-field="o.invoice_origin"/>
                                    </td>
                                </tr>
                            </t>
                            <t t-if="o.invoice_date">
                                <tr>
                                    <th>Invoice Date:</th>
                                    <td>
                                        <span t-field="o.invoice_date"/>
                                    </td>
                                </tr>
                            </t>
                            <t t-if="o.currency_id">
                                <tr>
                                    <th>Currency:</th>
                                    <td>
                                        <span t-field="o.currency_id"/>
                                    </td>
                                </tr>
                            </t>
                            <t t-if="o.amount_total">
                                <tr>
                                    <th>Amount:</th>
                                    <td>(                                        <span t-field="o.currency_id"/>
)                                        <span t-field="o.amount_total"/>
                                    </td>
                                </tr>
                            </t>
                            <t t-if="o.invoice_payment_term_id">
                                <tr>
                                    <th>Payment Terms:</th>
                                    <td>
                                        <span t-esc="o.invoice_payment_term_id.name"/>
                                    </td>
                                </tr>
                            </t>
                        </table>
                    </div>
                </div>
                <div class='mt-5' style="background-color:#f2f2f2;page-break-after:always;">
                    <br/>
                    <div class="row ml-1">
                        <h5 style="font-family: 'Lato', sans-serif;color:#404040;font-weight: bold;">How to pay your bill</h5>
                    </div>
                    <br/>
                    <div class="row col-12">
                        <div class='col-8'>
                            <strong style="color:red;">Credit Cards</strong>
                            <br/>
                            <span style="font-family: 'Lato', sans-serif;">We accept all major credit cards in select currencies.<br/>
Payments can be made via our secure payment link. Contact your account manager.</span>
                        </div>
                        <div class='col-4'>
                            <strong style="color:red;">Company Information</strong>
                            <br/>
                            <span style="font-family: 'Lato', sans-serif;">Tanzacan Tradelink Inc.<br/>
Tax Number: 898737911 RM0001<br/>
Since 1995</span>
                    </div>
                </div>
                <br/>
                <br/>
                <div class='ml-1'>
                    <strong style="color:red;">Paypal</strong>
                    <br/>
                    <span style="font-family: 'Lato', sans-serif;">Send payments via Paypal on our email: pay@tanzacan.com.</span>
                </div>
                <br/>
                <br/>
                <div class='ml-1'>
                    <strong style="color:red;">Bank Transfer</strong>
                    <br/>
                    <span style="font-family: 'Lato', sans-serif;">
                            Beneficiary Name &amp; Address: Tanzacan Tradelink Inc., 366 Denison Street, Suite 4, Markham, Ontario, Canada L3R 1B9
                        <br/>
                            Beneficiary Bank Name &amp; Address: TD Canada Trust, 7085 Woodbine Avenue, Markham, Ontario, Canada L3R 1A3
                        <br/>
                            Account Number: USD Account 7324227
                        <br/>
                            Branch Number: 12772
                        <br/>
                            Bank Number: 004
                        <br/>
                            SWIFT Code: TDOMCATTTOR
                        <br/>
                            Canadian Clearing Code (CC Code): 000412772
                    </span>
                </div>
                <br/>
            <!-- </div> -->

        </div>
    </t>

</template>
<template id="kits_invoice_report">
    <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
            <t t-call="tzc_sales_customization_spt.report_kits_invoice_document" t-lang="o.partner_id.lang"/>
        </t>
    </t>
</template>
</odoo>
